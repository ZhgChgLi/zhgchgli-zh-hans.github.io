<!doctype html><html lang="zh-cn" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="Universal Links iOS 开发攻略｜设定技巧与本地测试环境搭建" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="zh_cn" /><meta name="description" content="掌握 iOS Universal Links 设定与更新机制，解决 Apple CDN 快取延迟问题，并透过本地 nginx + ngrok 环境快速模拟测试，提升多域名与复杂路径匹配准确度，确保 APP 与网站无缝串接体验。" /><meta property="og:description" content="掌握 iOS Universal Links 设定与更新机制，解决 Apple CDN 快取延迟问题，并透过本地 nginx + ngrok 环境快速模拟测试，提升多域名与复杂路径匹配准确度，确保 APP 与网站无缝串接体验。" /><link rel="canonical" href="https://zh-hans.zhgchg.li/posts/zrealm-dev/universal-links-ios-%E5%BC%80%E5%8F%91%E6%94%BB%E7%95%A5-%E8%AE%BE%E5%AE%9A%E6%8A%80%E5%B7%A7%E4%B8%8E%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-12c5026da33d/" /><meta property="og:url" content="https://zh-hans.zhgchg.li/posts/zrealm-dev/universal-links-ios-%E5%BC%80%E5%8F%91%E6%94%BB%E7%95%A5-%E8%AE%BE%E5%AE%9A%E6%8A%80%E5%B7%A7%E4%B8%8E%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-12c5026da33d/" /><meta property="og:site_name" content="ZhgChgLi (Harry Li)" /><meta property="og:image" content="https://zh-hans.zhgchg.li/assets/12c5026da33d/1*HYAd1aal5Et1A-Qzs6VAtQ.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-02-04T11:57:25+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://zh-hans.zhgchg.li/assets/12c5026da33d/1*HYAd1aal5Et1A-Qzs6VAtQ.webp" /><meta property="twitter:title" content="Universal Links iOS 开发攻略｜设定技巧与本地测试环境搭建" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@zhgchgli" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi","url":"https://www.linkedin.com/in/zhgchgli"},"dateModified":"2024-09-13T17:31:54+08:00","datePublished":"2021-02-04T11:57:25+08:00","description":"掌握 iOS Universal Links 设定与更新机制，解决 Apple CDN 快取延迟问题，并透过本地 nginx + ngrok 环境快速模拟测试，提升多域名与复杂路径匹配准确度，确保 APP 与网站无缝串接体验。","headline":"Universal Links iOS 开发攻略｜设定技巧与本地测试环境搭建","image":{"lqip":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+","url":"https://zh-hans.zhgchg.li/assets/12c5026da33d/1*HYAd1aal5Et1A-Qzs6VAtQ.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zh-hans.zhgchg.li/posts/zrealm-dev/universal-links-ios-%E5%BC%80%E5%8F%91%E6%94%BB%E7%95%A5-%E8%AE%BE%E5%AE%9A%E6%8A%80%E5%B7%A7%E4%B8%8E%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-12c5026da33d/"},"url":"https://zh-hans.zhgchg.li/posts/zrealm-dev/universal-links-ios-%E5%BC%80%E5%8F%91%E6%94%BB%E7%95%A5-%E8%AE%BE%E5%AE%9A%E6%8A%80%E5%B7%A7%E4%B8%8E%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-12c5026da33d/"}</script><title>Universal Links iOS 开发攻略｜设定技巧与本地测试环境搭建 | ZhgChgLi (Harry Li)</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi (Harry Li)"><meta name="application-name" content="ZhgChgLi (Harry Li)"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/zh.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=false" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6WZJENT8WR"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-6WZJENT8WR'); }); </script><link rel="alternate" hreflang="en" href="https://en.zhgchg.li/posts/zrealm-dev/universal-links-optimization-boost-ios-13-14-integration-with-local-testing-setup-12c5026da33d/"><link rel="alternate" hreflang="ja" href="https://jp.zhgchg.li/posts/zrealm%E3%81%AE%E9%96%8B%E7%99%BA/universal-links-ios-13-14%E5%AF%BE%E5%BF%9C%E3%81%AE%E6%9C%80%E6%96%B0%E5%8B%95%E5%90%91%E3%81%A8%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%83%86%E3%82%B9%E3%83%88%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E6%B3%95-12c5026da33d/"><link rel="alternate" hreflang="zh-Hant" href="https://zhgchg.li/posts/zrealm-dev/universal-links-ios-%E9%96%8B%E7%99%BC%E6%94%BB%E7%95%A5-%E8%A8%AD%E5%AE%9A%E6%8A%80%E5%B7%A7%E8%88%87%E6%9C%AC%E5%9C%B0%E6%B8%AC%E8%A9%A6%E7%92%B0%E5%A2%83%E6%90%AD%E5%BB%BA-12c5026da33d/"><link rel="alternate" hreflang="zh-Hans" href="https://zh-hans.zhgchg.li/posts/zrealm-dev/universal-links-ios-%E5%BC%80%E5%8F%91%E6%94%BB%E7%95%A5-%E8%AE%BE%E5%AE%9A%E6%8A%80%E5%B7%A7%E4%B8%8E%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-12c5026da33d/"><link rel="alternate" hreflang="x-default" href="https://zh-hans.zhgchg.li/posts/zrealm-dev/universal-links-ios-%E5%BC%80%E5%8F%91%E6%94%BB%E7%95%A5-%E8%AE%BE%E5%AE%9A%E6%8A%80%E5%B7%A7%E4%B8%8E%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-12c5026da33d/"><link rel="stylesheet" href="/assets/css/post-toc.css"> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">ZhgChgLi (Harry Li)</a><p class="site-subtitle fst-italic mb-0">An iOS, web, and automation developer from Taiwan 🇹🇼 who also loves sharing, traveling, and writing.</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item" style="padding:0 15px 0 15px;"> <a href="https://medium.com/@zhgchgli" class="nav-link" target="_blank" style="background:#EDF4FF;color:#0A84FF;font-size:15px;transition:background-color .2s,color .2s;" onmouseover="this.style.backgroundColor='#0A84FF';this.style.color='#ffffff';" onmouseout="this.style.backgroundColor='#EDF4FF';this.style.color='#0A84FF';"> <i class="fa-brands fa-medium"></i> <span><span style="font-size: 18px; font-weight: boild;">Follow Me on Medium!</span><br/><u>1,051+</u> Followers</span> </a><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>首页</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>归档</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>关于我</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>联络我</span> </a><li class="nav-item"><div aria-label="Language switch" style="display:flex;align-items:center;justify-content:center;gap:5px;"> <a href="https://zhgchg.li/posts/zrealm-dev/universal-links-ios-%E9%96%8B%E7%99%BC%E6%94%BB%E7%95%A5-%E8%A8%AD%E5%AE%9A%E6%8A%80%E5%B7%A7%E8%88%87%E6%9C%AC%E5%9C%B0%E6%B8%AC%E8%A9%A6%E7%92%B0%E5%A2%83%E6%90%AD%E5%BB%BA-12c5026da33d/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid #ccc;background:#f3f3f3;color:#555;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> 正體中文 </a> <span style="width:1px;height:18px;background:rgba(0,0,0,.12);"></span> <a href="https://zh-hans.zhgchg.li/posts/zrealm-dev/universal-links-ios-%E5%BC%80%E5%8F%91%E6%94%BB%E7%95%A5-%E8%AE%BE%E5%AE%9A%E6%8A%80%E5%B7%A7%E4%B8%8E%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-12c5026da33d/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid #666;background:#111;color:#fff;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> 简体中文 </a></div><div aria-label="Language switch" style="display:flex;align-items:center;justify-content:center;gap:5px;margin-top:5px;"> <a href="https://en.zhgchg.li/posts/zrealm-dev/universal-links-optimization-boost-ios-13-14-integration-with-local-testing-setup-12c5026da33d/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid #ccc;background:#f3f3f3;color:#555;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> English </a> <span style="width:1px;height:18px;background:rgba(0,0,0,.12);"></span> <a href="https://jp.zhgchg.li/posts/zrealm%E3%81%AE%E9%96%8B%E7%99%BA/universal-links-ios-13-14%E5%AF%BE%E5%BF%9C%E3%81%AE%E6%9C%80%E6%96%B0%E5%8B%95%E5%90%91%E3%81%A8%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%83%86%E3%82%B9%E3%83%88%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E6%B3%95-12c5026da33d/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid #ccc;background:#f3f3f3;color:#555;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> 日本語 </a></div></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">首页</a> </span> <span>Universal Links iOS 开发攻略｜设定技巧与本地测试环境搭建</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> 文章</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜寻..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">取消</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>Universal Links iOS 开发攻略｜设定技巧与本地测试环境搭建</h1><p class="post-desc fw-light mb-4">掌握 iOS Universal Links 设定与更新机制，解决 Apple CDN 快取延迟问题，并透过本地 nginx + ngrok 环境快速模拟测试，提升多域名与复杂路径匹配准确度，确保 APP 与网站无缝串接体验。</p><div class="post-meta text-muted"> <span> 发布于 <time data-ts="1612411045" data-df="YYYY 年 M 月 D 日" data-bs-toggle="tooltip" data-bs-placement="bottom" > 2021 年 02 月 04 日 </time> </span> <span> 更新于 <time data-ts="1726219914" data-df="YYYY 年 M 月 D 日" data-bs-toggle="tooltip" data-bs-placement="bottom" > 2024 年 09 月 13 日 </time> </span><div class="mt-3 mb-3"> <a href="/assets/12c5026da33d/1*HYAd1aal5Et1A-Qzs6VAtQ.webp" class="popup img-link preview-img blur"><img data-src="/assets/12c5026da33d/1*HYAd1aal5Et1A-Qzs6VAtQ.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></div><div class="d-flex justify-content-between"> <span style="display: inline-flex; align-items: center; gap: 4px;"> 作者 <em> <a href="https://www.linkedin.com/in/zhgchgli">ZhgChgLi</a> </em> | <em><a href="https://www.linkedin.com/in/zhgchgli" target="_blank">Senior Software Engineer</a></em><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16" style="display: block; "><path fill="#007bff" d="M271.2 56C265.1 49.8 256.2 47.3 247.8 49.6C239.4 51.9 232.9 58.4 230.8 66.8L215.5 127C214.4 131.4 209.9 134 205.6 132.7L145.8 115.9C137.4 113.5 128.4 115.9 122.3 122C116.2 128.1 113.8 137.1 116.2 145.5L133.1 205.3C134.3 209.6 131.7 214.1 127.4 215.2L67.1 230.5C58.7 232.6 52.1 239.2 49.8 247.6C47.5 256 50 264.9 56.2 271L100.7 314.3C103.9 317.4 103.9 322.6 100.7 325.8L56.3 369.1C50.1 375.2 47.6 384.1 49.9 392.5C52.2 400.9 58.8 407.4 67.2 409.6L127.4 424.9C131.8 426 134.4 430.5 133.1 434.8L116.2 494.5C113.8 502.9 116.2 511.9 122.3 518C128.4 524.1 137.4 526.5 145.8 524.1L205.6 507.2C209.9 506 214.4 508.6 215.5 512.9L230.8 573.1C232.9 581.5 239.5 588.1 247.9 590.4C256.3 592.7 265.2 590.2 271.3 584L314.6 539.5C317.7 536.3 322.9 536.3 326.1 539.5L369.3 584C375.4 590.2 384.3 592.7 392.7 590.4C401.1 588.1 407.6 581.5 409.8 573.1L425.1 513C426.2 508.6 430.7 506 435 507.3L494.8 524.2C503.2 526.6 512.2 524.2 518.3 518.1C524.4 512 526.8 503 524.4 494.6L507.5 434.8C506.3 430.5 508.9 426 513.2 424.9L573.4 409.6C581.8 407.5 588.4 400.9 590.7 392.5C593 384.1 590.5 375.1 584.3 369.1L539.8 325.8C536.6 322.7 536.6 317.5 539.8 314.3L584.3 271C590.5 264.9 593 256 590.7 247.6C588.4 239.2 581.8 232.7 573.4 230.5L513.2 215.2C508.8 214.1 506.2 209.6 507.5 205.3L524.4 145.5C526.8 137.1 524.4 128.1 518.3 122C512.2 115.9 503.2 113.5 494.8 115.9L435 132.8C430.7 134 426.2 131.4 425.1 127.1L409.8 66.8C407.7 58.4 401.1 51.8 392.7 49.5C384.3 47.2 375.4 49.7 369.3 55.9L326 100.5C322.9 103.7 317.7 103.7 314.5 100.5L271.2 56z"/><path d="M250 330 l60 60 100 -140" stroke="#ffffff" stroke-width="40" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="3006 字" > <em>16 分钟</em>阅读</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">Universal Links iOS 开发攻略｜设定技巧与本地测试环境搭建</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">章节目录 🔖</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">Universal Links iOS 开发攻略｜设定技巧与本地测试环境搭建</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><div aria-label="Language switch" style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;"><div aria-label="Views" style="display:inline-flex;align-items:center;gap:6px;font-size:.85rem;"> <span style="display:inline-flex;align-items:center;justify-content:center;"> 浏览次数: <span style="margin-left:4px;" data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-original-title="最后更新时间: 2026-01-03 10:22:15 +08:00"><u>16,568+</u></span> </span></div><div style="display:flex;align-items:center;justify-content:flex-end;gap:8px;flex-wrap:wrap;"> <a href="https://zhgchg.li/posts/zrealm-dev/universal-links-ios-%E9%96%8B%E7%99%BC%E6%94%BB%E7%95%A5-%E8%A8%AD%E5%AE%9A%E6%8A%80%E5%B7%A7%E8%88%87%E6%9C%AC%E5%9C%B0%E6%B8%AC%E8%A9%A6%E7%92%B0%E5%A2%83%E6%90%AD%E5%BB%BA-12c5026da33d/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid rgba(220,53,69,.35);background:rgba(220,53,69,.08);color:#dc3545 !important;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> 正體中文 </a> <a href="https://zh-hans.zhgchg.li/posts/zrealm-dev/universal-links-ios-%E5%BC%80%E5%8F%91%E6%94%BB%E7%95%A5-%E8%AE%BE%E5%AE%9A%E6%8A%80%E5%B7%A7%E4%B8%8E%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-12c5026da33d/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid #dc3545;background:#dc3545;color:#fff !important;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> 简体中文 </a> <a href="https://en.zhgchg.li/posts/zrealm-dev/universal-links-optimization-boost-ios-13-14-integration-with-local-testing-setup-12c5026da33d/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid rgba(220,53,69,.35);background:rgba(220,53,69,.08);color:#dc3545 !important;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> English </a> <a href="https://jp.zhgchg.li/posts/zrealm%E3%81%AE%E9%96%8B%E7%99%BA/universal-links-ios-13-14%E5%AF%BE%E5%BF%9C%E3%81%AE%E6%9C%80%E6%96%B0%E5%8B%95%E5%90%91%E3%81%A8%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%83%86%E3%82%B9%E3%83%88%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E6%B3%95-12c5026da33d/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid rgba(220,53,69,.35);background:rgba(220,53,69,.08);color:#dc3545 !important;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> 日本語 </a></div></div><blockquote class="prompt-info"><p>基于 SEO 考量，本文标题与描述经 AI 调整，原始版本请参考内文。</p></blockquote><h4 id="zhgchgli-table-of-contents">文章目录</h4><nav class="zhgchgli-toc"><ul class="zhgchgli-toc-list"><li><a href="#universal-links-新鲜事">Universal Links 新鲜事</a></li><li><a href="#前言">前言</a></li><li><a href="#常见考量">常见考量</a></li><li class="has-children"><details><summary>apple-app-site-association 何时更新？ <a href="#apple-app-site-association-何时更新">#</a></summary><ul><li><a href="#apple-app-site-association-apple-cdn-确认">apple-app-site-association Apple CDN 确认</a></li><li><a href="#ios--14-debug">iOS ≥ 14 Debug</a></li></ul></details></li><li class="has-children"><details><summary>开发测试 <a href="#开发测试">#</a></summary><ul><li><a href="#在本地建一个模拟环境">在本地建一个模拟环境</a></li></ul></details></li><li class="has-children"><details><summary>Applinks 设定内容 <a href="#applinks-设定内容">#</a></summary><ul><li><a href="#ios--13-之前">iOS < 13 之前</a></li><li><a href="#ios--13-之后">iOS ≥ 13 之后</a></li><li><a href="#没有灵感">没有灵感？</a></li></ul></details></li><li><a href="#补充">补充</a></li><li class="has-children"><details><summary>延伸阅读 <a href="#延伸阅读">#</a></summary><ul><li><a href="#参考资料">参考资料</a></li></ul></details></li></ul></nav><hr /><h3 id="universal-links-新鲜事"><span class="me-2">Universal Links 新鲜事</span><a href="#universal-links-新鲜事" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>iOS 13, iOS 14 Universal Links 新鲜事＆建立本地测试环境</p><p><a href="/assets/12c5026da33d/1*HYAd1aal5Et1A-Qzs6VAtQ.webp" class="popup img-link blur"><img data-src="/assets/12c5026da33d/1*HYAd1aal5Et1A-Qzs6VAtQ.webp" alt="Photo by [NASA](https://unsplash.com/@nasa?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9Ijc5OSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Photo by <a href="https://unsplash.com/@nasa?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target="_blank">NASA</a></p><h3 id="前言"><span class="me-2">前言</span><a href="#前言" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>对于一个有网站又有 APP 的服务， Universal Links 的功能对于使用者体验来说无比的重要，能达到 Web 与 APP 之间的无缝接轨；但一直以来都只有简单设置，没有太多的著墨；前阵子刚好又遇到花了点时间研究了一下，把一些有趣的事记录下来。</p><h3 id="常见考量"><span class="me-2">常见考量</span><a href="#常见考量" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>经手过的服务，对于实作 Universal Links 的考量都是 APP 上并没有实作完整的网站功能，Universal Links 认的是域名，只要域名匹配到就会开启 APP；关于这个问题可以下 NOT 排除 APP 上没有相应功能的网址，若网站服务网址很极端，那干脆新建一个 subdomain 用来做 Universal Links。</p><h3 id="apple-app-site-association-何时更新"><span class="me-2">apple-app-site-association 何时更新？</span><a href="#apple-app-site-association-何时更新" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p>iOS &lt; 14，APP 在第一次安装、更新时会去询问 Universal Links 网站的 apple-app-site-association。</p><li><p>iOS ≥ 14 ，则是由 Apple CDN 做快取定期更新 Universal Links 网站的 apple-app-site-association；APP 在第一次安装、更新时会去跟 Apple CDN 拿取；但这边就会有个问题，Apple CDN 的 apple-app-site-association 可能还是旧的。</p></ul><p>关于 Apple CDN 的更新机制，查了一下文件，没有提到；查了下 <a href="https://developer.apple.com/forums/thread/651737" target="_blank">讨论</a> ，官方也只回应「会定期更新」细节之后会发布在文件…但至今依然还没看到。</p><blockquote><p><em>我自己觉得应该最慢 48 小时，就会更新吧。。。所以下次有更改到 apple-app-site-association 的话建议在 APP 上架更新前几天就先改好 apple-app-site-association 上线。</em></p></blockquote><h4 id="apple-app-site-association-apple-cdn-确认"><span class="me-2">apple-app-site-association Apple CDN 确认：</span><a href="#apple-app-site-association-apple-cdn-确认" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>Headers: HOST=app-site-association.cdn-apple.com
GET https://app-site-association.cdn-apple.com/a/v1/你的网域
</pre></table></code></div></div><p><a href="/assets/12c5026da33d/1*dgDfMgkFPUfeuAuEhl7RFQ.webp" class="popup img-link blur"><img data-src="/assets/12c5026da33d/1*dgDfMgkFPUfeuAuEhl7RFQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjkxNiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>可以取得当前 Apple CDN 上的版本长怎样。（记得加上 Request Header <code class="language-plaintext highlighter-rouge">Host=https://app-site-association.cdn-apple.com/</code> ）</p><h4 id="ios--14-debug"><span class="me-2">iOS ≥ 14 Debug</span><a href="#ios--14-debug" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>因前述的 CDN 问题，那我们在开发阶段该如何 debug 呢？</p><p>还好这部分苹果有给解决方法，不然没办法即时更新真的要吐血了；我们只需要再 <code class="language-plaintext highlighter-rouge">applinks:domain.com</code> 加上 <code class="language-plaintext highlighter-rouge">?mode=developer</code> 即可，另外还有 <code class="language-plaintext highlighter-rouge">managed(for 企业内部 APP)</code> , or <code class="language-plaintext highlighter-rouge">developer+managed</code> 模式可设定。</p><p><a href="/assets/12c5026da33d/1*z4R7wEHHAlLyF1rdAEAmew.webp" class="popup img-link blur"><img data-src="/assets/12c5026da33d/1*z4R7wEHHAlLyF1rdAEAmew.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2ODAiIGhlaWdodD0iMTM1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>加上 mode=developer 后，APP 在模拟器上每次 Build &amp; Ｒun 时都会直接跟网站拿最新的 app-site-association 来用。</p><p>如果要 Build &amp; Run 在实机则要先去「设定」-&gt;「开发者」-&gt; 打开「Associated Domains Development」选项即可。</p><p><a href="/assets/12c5026da33d/1*gj4Qm445mFERa25t6PZV1Q.webp" class="popup img-link blur"><img data-src="/assets/12c5026da33d/1*gj4Qm445mFERa25t6PZV1Q.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTI1IiBoZWlnaHQ9IjI0MzYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><blockquote><p><em>⚠️ <strong>这边有个坑</strong> ，app-site-association 可以放在网站根目录或是 <code class="language-plaintext highlighter-rouge">./.well-known</code> 目录下；但在 mode=developer 下他只会问 <code class="language-plaintext highlighter-rouge">./.well-known/app-site-association</code> ，害我以为怎么没效。</em></p></blockquote><h3 id="开发测试"><span class="me-2">开发测试</span><a href="#开发测试" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>如果是 iOS &lt;14 记得有更改过 app-site-association 的话要删掉再重 Build &amp; Run APP 才会去抓最新的回来，iOS ≥ 14 请参考前述方法加上 mode=developer。</p><p>app-site-association 内容的修改，好一点的话可以自行修改伺服器上的档；但对于有时候碰不到伺服器端的我们来说，如果要做 universal links 的测试会非常的麻烦，要不停的麻烦后端同事帮忙，变成要很确定 app-site-association 内容后一次上线，一直改来改去会把同事逼疯。</p><h4 id="在本地建一个模拟环境"><span class="me-2">在本地建一个模拟环境</span><a href="#在本地建一个模拟环境" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>为了解决上述问题，我们可以在本地起一个小服务。</p><p>首先在 mac 上安装 nginx：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>brew <span class="nb">install </span>nginx
</pre></table></code></div></div><p>如果没安装过 <a href="https://brew.sh/index_zh-tw" target="_blank">brew</a> 可先安装：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>/bin/bash <span class="nt">-c</span> <span class="s2">"</span><span class="si">$(</span>curl <span class="nt">-fsSL</span> https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class="si">)</span><span class="s2">"</span>
</pre></table></code></div></div><p>安装完 nginx 后，前往 <code class="language-plaintext highlighter-rouge">/usr/local/etc/nginx/</code> 打开编辑 <code class="language-plaintext highlighter-rouge">nginx.conf</code> 档案：</p><div class="language-perl highlighter-rouge"><div class="code-header"> <span data-label-text="Perl"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="o">...</span><span class="err">略</span>
<span class="nv">server</span> <span class="p">{</span>
        <span class="nb">listen</span>       <span class="mi">8080</span><span class="p">;</span>
        <span class="nv">server_name</span>  <span class="nv">localhost</span><span class="p">;</span>
<span class="c1">#charset koi8-r;</span>
<span class="c1">#access_log  logs/host.access.log  main;</span>
<span class="nv">location</span> <span class="o">/</span> <span class="p">{</span>
            <span class="nv">root</span>   <span class="sr">/Users/</span><span class="nv">zhgchgli</span><span class="o">/</span><span class="nv">Documents</span><span class="p">;</span>
            <span class="nb">index</span>  <span class="nb">index</span><span class="o">.</span><span class="nv">html</span> <span class="nb">index</span><span class="o">.</span><span class="nv">htm</span><span class="p">;</span>
        <span class="p">}</span>
<span class="o">...</span><span class="err">略</span>
</pre></table></code></div></div><p>大概在第 44 行的位置将 location / 里的 root 换成你想要的目录位置（这边以 Documents 为例）。</p><blockquote><p><em>listen on <strong>8080</strong> port ，如果没有冲突则不需要修改。</em></p></blockquote><p>储存修改完后，下指令启动 nginx：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>nginx
</pre></table></code></div></div><p>若要停止时，则下：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>nginx <span class="nt">-s</span> stop
</pre></table></code></div></div><p>停止。</p><p>如果有更改 <code class="language-plaintext highlighter-rouge">nginx.conf</code> 记得要下：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>nginx <span class="nt">-s</span> reload
</pre></table></code></div></div><p>重新启用服务。</p><p>建立一个 <code class="language-plaintext highlighter-rouge">./.well-known</code> 目录在刚设定的 <code class="language-plaintext highlighter-rouge">root</code> 目录内，并将 <code class="language-plaintext highlighter-rouge">apple-app-site-association</code> 档案放到 <code class="language-plaintext highlighter-rouge">./.well-known</code> 内。</p><blockquote><p><em>⚠️ <code class="language-plaintext highlighter-rouge">.well-known</code> 建立后若消失，请注意 Mac 要打开「显示隐藏资料夹」功能：</em></p></blockquote><p>在 terminal 下：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>defaults write com.apple.finder AppleShowAllFiles TRUE
</pre></table></code></div></div><p>再下 killall finder 重启所有 finder，即可。</p><p><a href="/assets/12c5026da33d/1*AzM6lK0kzT-M-2OdXoyIXA.webp" class="popup img-link blur"><img data-src="/assets/12c5026da33d/1*AzM6lK0kzT-M-2OdXoyIXA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzODEiIGhlaWdodD0iMTc2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><blockquote><p><em>⚠️</em> <code class="language-plaintext highlighter-rouge">apple-app-site-association</code> <em>看起来没有副档名，但实际还是有 .json 副档名：</em></p></blockquote><p>在档案上按右键 -&gt; 「取得资讯 Get Info」-&gt;「Name &amp; Extension」-&gt; 检查有无副档名＆同时可取消勾选「隐藏档案类型 Hide extension」</p><p><a href="/assets/12c5026da33d/1*UFwnnjCot8xRqslhdQktKg.webp" class="popup img-link blur"><img data-src="/assets/12c5026da33d/1*UFwnnjCot8xRqslhdQktKg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNzciIGhlaWdodD0iNTcxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>没问题后，打开浏览器测试以下连结是否正常下载 apple-app-site-association：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>http://localhost:8080/.well-known/apple-app-site-association
</pre></table></code></div></div><p>如果能正常下载代表本地环境模拟成功！</p><blockquote><p><em>如果出现 404/403 错误则请检查 root 目录是否正确、目录/档案是否有放入、apple-app-site-association 是否不小心带了副档名( .json)。</em></p></blockquote><p><strong>注册＆下载 <a href="http://ngrok.com" target="_blank">Ngrok</a></strong></p><p><a href="/assets/12c5026da33d/1*Shk9u59HgRRSiMw0wt899Q.webp" class="popup img-link blur"><img data-src="/assets/12c5026da33d/1*Shk9u59HgRRSiMw0wt899Q.webp" alt="[ngrok.com](https://dashboard.ngrok.com/get-started/setup){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NjAiIGhlaWdodD0iNDY0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="https://dashboard.ngrok.com/get-started/setup" target="_blank">ngrok.com</a></p><p><a href="/assets/12c5026da33d/1*ljBqKrOFb9Gq48dO0GeIeA.webp" class="popup img-link blur"><img data-src="/assets/12c5026da33d/1*ljBqKrOFb9Gq48dO0GeIeA.webp" alt="解压缩出 ngrok 执行档" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDkiIGhlaWdodD0iMTY4Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>解压缩出 ngrok 执行档</p><p><a href="/assets/12c5026da33d/1*fnEUyJMtVhUGurU5vX5K6A.webp" class="popup img-link blur"><img data-src="/assets/12c5026da33d/1*fnEUyJMtVhUGurU5vX5K6A.webp" alt="进入 [Dashboard 页面](https://dashboard.ngrok.com/get-started/setup){:target=&quot;_blank&quot;} 执行 Config 设定" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjMzMiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>进入 <a href="https://dashboard.ngrok.com/get-started/setup" target="_blank">Dashboard 页面</a> 执行 Config 设定</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>./ngrok authtoken 你的TOKEN
</pre></table></code></div></div><p>设定好之后，下：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>./ngrok http 8080
</pre></table></code></div></div><blockquote><p><em>因我们的 nginx 在 8080 port。</em></p></blockquote><p>启动服务。</p><p><a href="/assets/12c5026da33d/1*8i6EP7KKwxihLZ1PG1RUGw.webp" class="popup img-link blur"><img data-src="/assets/12c5026da33d/1*8i6EP7KKwxihLZ1PG1RUGw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2ODIiIGhlaWdodD0iNDgzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>这时候我们会看到一个服务启动状态视窗，可以从 Forwarding 中取的此次分配到的公开网址。</p><blockquote><p><em>⚠️ <strong>每次启动分配到的网址都会变，所以仅能作为开发测试使用。</strong></em></p></blockquote><blockquote><p><em><strong>这边以此次分配到的网址</strong> <code class="language-plaintext highlighter-rouge">https://ec87f78bec0f.ngrok.io/</code> 为例</em></p></blockquote><p>回到浏览器改输入 <code class="language-plaintext highlighter-rouge">https://ec87f78bec0f.ngrok.io/.well-known/apple-app-site-association</code> 看看能不能正常下载浏览 apple-app-site-association 档案，如果没问题则可继续下一步。</p><p>将 ngrok 分配到的网址输入到 Associated Domains applinks: 设定中。</p><p><a href="/assets/12c5026da33d/1*K5Eio0Yi7nNHQuLSuIsYeA.webp" class="popup img-link blur"><img data-src="/assets/12c5026da33d/1*K5Eio0Yi7nNHQuLSuIsYeA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MzMiIGhlaWdodD0iMTQxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>记得带上 <code class="language-plaintext highlighter-rouge">?mode=developer</code> 方便我们测试。</p><p><strong>重新 Build &amp; Run APP：</strong></p><p><a href="/assets/12c5026da33d/1*VFIKU-UxCHNQVnf8DOV8Qw.webp" class="popup img-link blur"><img data-src="/assets/12c5026da33d/1*VFIKU-UxCHNQVnf8DOV8Qw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MzAiIGhlaWdodD0iNzg4Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>打开浏览器输入相应的 Universal Links 测试网址（EX: <code class="language-plaintext highlighter-rouge">https://ec87f78bec0f.ngrok.io/buy/123</code> ）查看效果。</p><blockquote><p><em>页面出现 404 不要理他，因为我们实际没有那一页；我们只是要测 iOS 对网址匹配的功能符不符合我们预期；如果上方有出现 「Open」代表匹配成功，另外也可以测 NOT 反向的状况。</em></p></blockquote><p>点击「Open」后开启 APP -&gt; 测试成功！</p><blockquote><p><em>开发阶段都测试 OK 后，将确认修改过之后的 apple-app-site-association 档案再交给后端上传到伺服器就能确保万无一失啰～</em></p></blockquote><blockquote><p><em>最后记得将 Associated Domains applinks: 改为正试机网址。</em></p></blockquote><p>另外我们也可以从 ngrok 运行状态视窗中看到每次 APP Build &amp; Run 有没有跟我们要 apple-app-site-association 档案：</p><p><a href="/assets/12c5026da33d/1*d6yvnEaiOPbqy57PDMe2Mw.webp" class="popup img-link blur"><img data-src="/assets/12c5026da33d/1*d6yvnEaiOPbqy57PDMe2Mw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2ODIiIGhlaWdodD0iNDgzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><h3 id="applinks-设定内容"><span class="me-2">Applinks 设定内容</span><a href="#applinks-设定内容" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="ios--13-之前"><span class="me-2">iOS &lt; 13 之前：</span><a href="#ios--13-之前" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>设定档较简单，只有以下内容可设定：</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"applinks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
           </span><span class="p">{</span><span class="w">
             </span><span class="nl">"appID"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"TeamID.BundleID"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"paths"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
               </span><span class="s2">"NOT /help/"</span><span class="p">,</span><span class="w">
               </span><span class="s2">"*"</span><span class="w">
             </span><span class="p">]</span><span class="w">
           </span><span class="p">}</span><span class="w">
       </span><span class="p">]</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>将 <code class="language-plaintext highlighter-rouge">TeamID.BundleId</code> 换成你的专案设定 (ex: TeamID = <code class="language-plaintext highlighter-rouge">ABCD</code> , BundleID = <code class="language-plaintext highlighter-rouge">li.zhgchg.demoapp</code> =&gt; <code class="language-plaintext highlighter-rouge">ABCD.li.zhgchg.demoapp</code> )。</p><blockquote><p><em>如果有多个 appID 则要重复加入多组。</em></p></blockquote><p><strong>paths 部分则为匹配规则，能支援以下几种语法：</strong></p><ul><li><p><code class="language-plaintext highlighter-rouge">*</code> ：匹配 0~多个字元，ex: <code class="language-plaintext highlighter-rouge">/home/*</code> (home/alan…)</p><li><p><code class="language-plaintext highlighter-rouge">?</code> ：匹配 1 个字元，ex: <code class="language-plaintext highlighter-rouge">201?</code> (2010~2019)</p><li><p><code class="language-plaintext highlighter-rouge">?*</code> ：匹配 1 个~多个字元，ex: <code class="language-plaintext highlighter-rouge">/?*</code> (/test、/home. . )</p><li><p><code class="language-plaintext highlighter-rouge">NOT</code> ：反向排除，ex: <code class="language-plaintext highlighter-rouge">NOT /help</code> (any url but /help)</p></ul><p>更多玩法组合可自己依照实际情况决定，更多资讯可参考 <a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/AppSearch/UniversalLinks.html#//apple_ref/doc/uid/TP40016308-CH12-SW1" target="_blank">官方文件</a> 。</p><blockquote><p><em>- 请注意，他不是 Regex，不支援任何 Regex 写法。</em></p></blockquote><blockquote><p><em>- 旧版不支援 Query (?name=123)、Anchor ( #title)。</em></p></blockquote><blockquote><p><em>- 中文网址须先转成 ASCII 后才能放在 paths 中 (所有url 字元均要是 ASCII)。</em></p></blockquote><h4 id="ios--13-之后"><span class="me-2">iOS ≥ 13 之后：</span><a href="#ios--13-之后" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>强化了设定档内容的功能，多增加支援 Query/Anchor、字符集、编码处理。</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="nl">"applinks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"appIDs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"TeamID.BundleID"</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nl">"components"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"#"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no_universal_links"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"exclude"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Matches any URL whose fragment equals no_universal_links and instructs the system not to open it as a universal link"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"/"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/buy/*"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Matches any URL whose path starts with /buy/"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"/"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/help/website/*"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"exclude"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Matches any URL whose path starts with /help/website/ and instructs the system not to open it as a universal link"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"/"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/help/*"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"?"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"articleNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"????"</span><span class="w"> </span><span class="p">},</span><span class="w">
          </span><span class="nl">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Matches any URL whose path starts with /help/ and that has a query item with name 'articleNumber' and a value of exactly 4 characters"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>转贴自官方文件，可以看到格式有所改变。</p><p><code class="language-plaintext highlighter-rouge">appIDs</code> 为阵列，可放入多组 appID，这样就不用像以前一样只能整个区块重复输入。</p><blockquote><p><em>WWDC 有提到与旧版兼容， <strong>当 iOS ≥ 13 有读到新的格式就会忽略旧的 paths</strong> 。</em></p></blockquote><p>匹配规则改放在 <code class="language-plaintext highlighter-rouge">components</code> 中；支援 3 种类型：</p><ul><li><p><code class="language-plaintext highlighter-rouge">/</code> ： URL</p><li><p><code class="language-plaintext highlighter-rouge">?</code> ：Query，ex: ?name=123&amp;place=tw</p><li><p><code class="language-plaintext highlighter-rouge">#</code> ：Anchor，ex: #title</p></ul><p>并且可以搭配使用，假设今天 <code class="language-plaintext highlighter-rouge">/user/?id=100#detail</code> 才需要跳到 APP 则可写成：</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"/"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/user/*"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"?"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="nl">"#"</span><span class="p">:</span><span class="w"> </span><span class="s2">"detail"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>其中匹配语法同原本语法，也是支援 <code class="language-plaintext highlighter-rouge">*</code> <code class="language-plaintext highlighter-rouge">?</code> <code class="language-plaintext highlighter-rouge">?*</code> 。</p><p>新增 <code class="language-plaintext highlighter-rouge">comment</code> 注解栏位，可输入注解方便辨识。（但请注意这是公开的，别人也看得到）</p><p>反向排除则改为指定 <code class="language-plaintext highlighter-rouge">exclude: true</code> 。</p><p>新增 <code class="language-plaintext highlighter-rouge">caseSensitive</code> 指定功能，可指定匹配规则是否对大小写敏感， <code class="language-plaintext highlighter-rouge">预设：true</code> ，有这需求的话可以少写许多规则。</p><p>新增 <code class="language-plaintext highlighter-rouge">percentEncoded</code> 前面说到的，旧版需要先将网址转为 ASCII 放到 paths 中（如果是中文字会变得很丑无法辨识）；这个参数就是是否要帮我们自动 encode， <code class="language-plaintext highlighter-rouge">预设是 true</code> 。 假设是中文网址就能直接放入了(ex: <code class="language-plaintext highlighter-rouge">/客服中心</code> )。</p><p>详细官方文件可 <a href="https://developer.apple.com/documentation/bundleresources/applinks/details/components" target="_blank">参考此</a> 。</p><p><strong>预设字符集：</strong></p><p>这算是这次更新蛮重要的功能之一，新增支援字符集。</p><p>系统帮我们定义好的字符集：</p><ul><li><p><code class="language-plaintext highlighter-rouge">$(alpha)</code> ：A-Z 和 a-z</p><li><p><code class="language-plaintext highlighter-rouge">$(upper)</code> ：A-Z</p><li><p><code class="language-plaintext highlighter-rouge">$(lower)</code> ：a-z</p><li><p><code class="language-plaintext highlighter-rouge">$(alnum)</code> ：A-Z 和 a-z 和 0–9</p><li><p><code class="language-plaintext highlighter-rouge">$(digit)</code> ：0–9</p><li><p><code class="language-plaintext highlighter-rouge">$(xdigit)</code> ：十六进制字符，0–9 和 a,b,c,d,e,f,A,B,C,D,E,F</p><li><p><code class="language-plaintext highlighter-rouge">$(region)</code> ：ISO 地区编码 <a href="https://developer.apple.com/documentation/foundation/locale/2293271-isoregioncodes" target="_blank">isoRegionCodes</a> ，Ex: TW</p><li><p><code class="language-plaintext highlighter-rouge">$(lang)</code> ：ISO 语言编码 <a href="https://developer.apple.com/documentation/foundation/locale/2293744-isolanguagecodes" target="_blank">isoLanguageCodes</a> ，Ex: zh</p></ul><p>假设我们的网址有多语系，我想要支援 Universal links 时，可以这样设定：</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nl">"components"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">        
     </span><span class="p">{</span><span class="w"> </span><span class="nl">"/"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/$(lang)-$(region)/$(food)/home"</span><span class="w"> </span><span class="p">}</span><span class="w">      
</span><span class="p">]</span><span class="w">
</span></pre></table></code></div></div><p>这样不管是 <code class="language-plaintext highlighter-rouge">/zh-TW/home</code> 、 <code class="language-plaintext highlighter-rouge">/en-US/home</code> 都能支援，非常方便，不用自己写一整排规则！</p><p><strong>自订字符集：</strong></p><p>除了预设字符集之外，我们也能自订字符集，增加设定档复用、可读性。</p><p>在 <code class="language-plaintext highlighter-rouge">applinks</code> 中加入 <code class="language-plaintext highlighter-rouge">substitutionVariables</code> 即可：</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"applinks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"substitutionVariables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"food"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"burrito"</span><span class="p">,</span><span class="w"> </span><span class="s2">"pizza"</span><span class="p">,</span><span class="w"> </span><span class="s2">"sushi"</span><span class="p">,</span><span class="w"> </span><span class="s2">"samosa"</span><span class="w"> </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="nl">"appIDs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nl">"components"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="nl">"/"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/$(food)/"</span><span class="w"> </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>范例中自订了一个 <code class="language-plaintext highlighter-rouge">food</code> 字符集，并在后续 <code class="language-plaintext highlighter-rouge">components</code> 中使用。</p><p>以上范例可匹配 <code class="language-plaintext highlighter-rouge">/burrito</code> , <code class="language-plaintext highlighter-rouge">/pizza</code> , <code class="language-plaintext highlighter-rouge">/sushi</code> , <code class="language-plaintext highlighter-rouge">/samosa</code> 。</p><p>细节可参考 <a href="https://developer.apple.com/documentation/bundleresources/applinks/substitutionvariables" target="_blank">此篇</a> 官方文件。</p><h4 id="没有灵感"><span class="me-2">没有灵感？</span><a href="#没有灵感" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>如果对设定档内容没有灵感，可偷偷参考其他网站福的内容，只要在服务网站首页网址加上 <code class="language-plaintext highlighter-rouge">/app-site-association</code> 或 <code class="language-plaintext highlighter-rouge">/.well-known/app-site-association</code> 即可读取他们的设定。</p><p>例如： <a href="https://www.netflix.com/apple-app-site-association" target="_blank">https://www.netflix.com/apple-app-site-association</a></p><h3 id="补充"><span class="me-2">补充</span><a href="#补充" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>在有使用 <code class="language-plaintext highlighter-rouge">SceneDelegate</code> 的情况下，open universal link 的进入点是在SceneDelegate 中：</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">scene</span><span class="p">(</span><span class="n">_</span> <span class="nv">scene</span><span class="p">:</span> <span class="kt">UIScene</span><span class="p">,</span> <span class="k">continue</span> <span class="nv">userActivity</span><span class="p">:</span> <span class="kt">NSUserActivity</span><span class="p">)</span>
</pre></table></code></div></div><p><strong>而非 AppDelegate 的：</strong></p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="n">_</span> <span class="nv">application</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">,</span> <span class="k">continue</span> <span class="nv">userActivity</span><span class="p">:</span> <span class="kt">NSUserActivity</span><span class="p">,</span> <span class="nv">restorationHandler</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">([</span><span class="kt">UIUserActivityRestoring</span><span class="p">]?)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span>
</pre></table></code></div></div><h3 id="延伸阅读"><span class="me-2">延伸阅读</span><a href="#延伸阅读" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p><a href="https://zh-hans.zhgchg.li/posts/zrealm-dev/ios-%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%B8%90%E5%8F%B7%E5%AF%86%E7%A0%81%E6%95%B4%E5%90%88-%E6%8F%90%E5%8D%87-app-%E4%B8%8E%E7%BD%91%E7%AB%99%E7%99%BB%E5%85%A5%E4%BD%93%E9%AA%8C-%E5%BF%AB%E9%80%9F%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%A5%E5%AF%86%E7%A0%81-948ed34efa09/">iOS 跨平台帐号密码整合，加强登入体验</a></p><li><p><a href="https://zh-hans.zhgchg.li/posts/zrealm-dev/ios-deferred-deep-link-%E5%BB%B6%E8%BF%9F%E6%B7%B1%E5%BA%A6%E8%BF%9E%E7%BB%93%E5%AE%9E%E4%BD%9C-swift-%E5%AE%8C%E6%95%B4%E6%B5%81%E7%A8%8B%E4%B8%8E%E6%8A%80%E5%B7%A7%E8%A7%A3%E6%9E%90-b08ef940c196/">iOS Deferred Deep Link 延迟深度连结实作(Swift)</a></p></ul><h4 id="参考资料"><span class="me-2">参考资料</span><a href="#参考资料" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><p><a href="https://www.wwdcnotes.com/notes/wwdc20/10098/" target="_blank">What’s new in Universal Links</a></p><li><p><a href="https://developer.apple.com/documentation/bundleresources/applinks" target="_blank">Apple Documentation</a></p></ul><p>有任何问题及指教欢迎 <a href="https://www.zhgchg.li/contact" target="_blank">与我联络</a> 。</p><script src="/assets/clipboard.min.js"></script><div style=" display:flex; align-items:center; gap:10px; border:1px solid #e5e7eb; background:#f9fafb; padding:12px 16px; border-radius:12px; margin:18px 0; box-shadow:0 3px 8px rgba(0,0,0,0.05); width: auto;"> <input id="share-url" value="https://zh-hans.zhgchg.li/posts/zrealm-dev/universal-links-ios-%E5%BC%80%E5%8F%91%E6%94%BB%E7%95%A5-%E8%AE%BE%E5%AE%9A%E6%8A%80%E5%B7%A7%E4%B8%8E%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-12c5026da33d/" readonly="" style=" flex:1; border:1px solid #d1d5db; border-radius:8px; padding:10px 12px; font-size:0.9rem; background:#ffffff; color:#111827; outline:none; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; " /> <button class="btn" data-clipboard-target="#share-url" id="copy-btn" style=" border:none; background:#3b82f6; color:white; padding:10px 16px; border-radius:10px; cursor:pointer; font-size:0.85rem; font-weight:600; display:flex; align-items:center; gap:6px; transition:all .15s ease; box-shadow:0 2px 5px rgba(59,130,246,0.35); " onmouseover="this.style.opacity='0.92';" onmouseout="this.style.opacity='1';"> <span style="font-size:1rem;">🔗</span> <span id="copy-btn-text">Copy link to share!</span> </button></div><script> new ClipboardJS('.btn'); var btn = document.getElementById("copy-btn"); var text = document.getElementById("copy-btn-text"); btn.addEventListener("click", function () { text.textContent = "Copied!"; btn.style.background = "#16a34a"; btn.style.boxShadow = "0 2px 6px rgba(22,163,74,0.35)"; setTimeout(() => { text.textContent = "Copy link to share!"; btn.style.background = "#3b82f6"; btn.style.boxShadow = "0 2px 5px rgba(59,130,246,0.35)"; }, 1500); });</script><hr /><p><a href="/contact" target="_blank" rel="noopener" style="display:block;margin:12px 0;text-align:center;align-items:center;justify-content:center;padding:10px 22px;border-radius:999px;text-decoration:none;background:linear-gradient(135deg,#ffd54f,#ffb300);color:#000;font-size:16px;font-weight:700;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;box-shadow:0 4px 10px rgba(0,0,0,.15);cursor:pointer;transition:all .15s ease;width:350px" onmouseover="this.style.background=&quot;linear-gradient(135deg,#FFE082,#FFC107)&quot;,this.style.transform=&quot;translateY(-1px)&quot;,this.style.boxShadow=&quot;0 6px 14px rgba(0,0,0,0.2)&quot;" onmouseout="this.style.background=&quot;linear-gradient(135deg,#FFD54F,#FFB300)&quot;,this.style.transform=&quot;translateY(0)&quot;,this.style.boxShadow=&quot;0 4px 10px rgba(0,0,0,0.15)&quot;">🍺 Buy me a beer on PayPal</a></p><blockquote class="prompt-tip"><p>👉👉👉 <a href="https://medium.com/@zhgchgli" target="_blank"><strong>Follow Me On Medium!</strong> (1,051+ Followers)</a> 👈👈👈</p></blockquote><blockquote class="prompt-info"><p>本文首次发表于 Medium (<a href="https://medium.com/p/12c5026da33d" target="_blank"><strong>点击查看原始版本</strong></a>)，由 <a href="/posts/tools/medium-to-jekyll/" target="_blank">ZMediumToMarkdown</a> 提供自动转换与同步技术。</p></blockquote><blockquote class="prompt-info"><p><a href="https://github.com/ZhgChgLi/zhgchgli.github.io/blob/main/_posts/zh-cn/zmediumtomarkdown/2021-02-04-12c5026da33d.md" target="_blank">Improve this page on Github.</a></p></blockquote></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/zrealm-dev/">ZRealm Dev.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/simplified-chinese/" class="post-tag no-text-decoration" >simplified-chinese</a> <a href="/tags/ios/" class="post-tag no-text-decoration" >ios</a> <a href="/tags/ios-app-development/" class="post-tag no-text-decoration" >ios-app-development</a> <a href="/tags/universal-links/" class="post-tag no-text-decoration" >universal-links</a> <a href="/tags/app-store/" class="post-tag no-text-decoration" >app-store</a> <a href="/tags/deeplink/" class="post-tag no-text-decoration" >deeplink</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> 本文由作者以 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh-hans"> CC BY 4.0 </a> 授权。</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">分享</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Universal%20Links%20iOS%20%E5%BC%80%E5%8F%91%E6%94%BB%E7%95%A5%EF%BD%9C%E8%AE%BE%E5%AE%9A%E6%8A%80%E5%B7%A7%E4%B8%8E%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%20-%20ZhgChgLi%20(Harry%20Li)&url=https%3A%2F%2Fzh-hans.zhgchg.li%2Fposts%2Fzrealm-dev%2Funiversal-links-ios-%25E5%25BC%2580%25E5%258F%2591%25E6%2594%25BB%25E7%2595%25A5-%25E8%25AE%25BE%25E5%25AE%259A%25E6%258A%2580%25E5%25B7%25A7%25E4%25B8%258E%25E6%259C%25AC%25E5%259C%25B0%25E6%25B5%258B%25E8%25AF%2595%25E7%258E%25AF%25E5%25A2%2583%25E6%2590%25AD%25E5%25BB%25BA-12c5026da33d%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Universal%20Links%20iOS%20%E5%BC%80%E5%8F%91%E6%94%BB%E7%95%A5%EF%BD%9C%E8%AE%BE%E5%AE%9A%E6%8A%80%E5%B7%A7%E4%B8%8E%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%20-%20ZhgChgLi%20(Harry%20Li)&u=https%3A%2F%2Fzh-hans.zhgchg.li%2Fposts%2Fzrealm-dev%2Funiversal-links-ios-%25E5%25BC%2580%25E5%258F%2591%25E6%2594%25BB%25E7%2595%25A5-%25E8%25AE%25BE%25E5%25AE%259A%25E6%258A%2580%25E5%25B7%25A7%25E4%25B8%258E%25E6%259C%25AC%25E5%259C%25B0%25E6%25B5%258B%25E8%25AF%2595%25E7%258E%25AF%25E5%25A2%2583%25E6%2590%25AD%25E5%25BB%25BA-12c5026da33d%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fzh-hans.zhgchg.li%2Fposts%2Fzrealm-dev%2Funiversal-links-ios-%25E5%25BC%2580%25E5%258F%2591%25E6%2594%25BB%25E7%2595%25A5-%25E8%25AE%25BE%25E5%25AE%259A%25E6%258A%2580%25E5%25B7%25A7%25E4%25B8%258E%25E6%259C%25AC%25E5%259C%25B0%25E6%25B5%258B%25E8%25AF%2595%25E7%258E%25AF%25E5%25A2%2583%25E6%2590%25AD%25E5%25BB%25BA-12c5026da33d%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="复制连结" data-title-succeed="连结已成功复制！" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">最近更新</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/medium-api-%E7%88%AC%E5%8F%96%E8%B5%84%E6%96%99%E4%B8%8E%E7%AA%81%E7%A0%B4-cloudflare-%E9%98%B2%E6%8A%A4-%E5%AE%8C%E6%95%B4-graphql-%E6%93%8D%E4%BD%9C%E6%95%99%E5%AD%A6-88f0fb935120/">Medium API 资料爬虫与 Cloudflare 攻防的心路历程</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/app-store-connect-api-webhook-%E4%B8%B2%E6%8E%A5-%E6%8F%90%E5%8D%87-ios-ci-cd-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%95%88%E7%8E%87%E4%B8%8E%E9%80%9A%E7%9F%A5%E6%B5%81%E7%A8%8B-7c0974856393/">CI/CD 使用 App Store Connect API Webhook 串接自动化工作流程</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/ci-cd-%E6%98%AF%E4%BB%80%E4%B9%88-%E6%89%93%E9%80%A0%E9%AB%98%E6%95%88%E7%A8%B3%E5%AE%9A%E5%BC%80%E5%8F%91%E5%9B%A2%E9%98%9F%E7%9A%84%E5%85%B3%E9%94%AE%E6%B5%81%E7%A8%8B%E4%B8%8E%E5%B7%A5%E5%85%B7%E9%80%89%E6%8B%A9-c008a9e8ceca/">CI/CD 实战指南（一）：CI/CD 是什么？如何透过 CI/CD 打造稳定高效的开发团队？工具选择？</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/google-apps-script-web-app-%E6%89%93%E9%80%A0-github-action-ci-cd-%E8%87%AA%E8%AE%A2%E8%A1%A8%E5%8D%95%E6%8F%90%E5%8D%87%E5%BC%80%E5%8F%91%E6%95%88%E7%8E%87-4cb4437818f2/">使用 Google Apps Script Web App 表单串接 Github Action CI/CD 工作</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-robotic-process-automation/github-action-%E5%85%8D%E8%B4%B9%E9%83%A8%E7%BD%B2-zreviewtender-app-%E5%95%86%E5%9F%8E%E8%AF%84%E4%BB%B7%E7%9B%91%E6%8E%A7%E6%9C%BA%E5%99%A8%E4%BA%BA-%E4%B8%89%E6%AD%A5%E9%AA%A4%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B-0095528cf875/">Quick Start! Github Action x ZReviewTender 免费快速部署你的 App 商城评价监控机器人</a></ul></section><section><h2 class="panel-heading">热门标签</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/simplified-chinese/">simplified-chinese</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E9%96%8B%E7%AE%B1/">開箱</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a> <a class="post-tag btn btn-outline-primary" href="/tags/japan/">japan</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">章节目录 🔖</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">延伸阅读</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/zrealm-dev/ios-deferred-deep-link-%E5%BB%B6%E8%BF%9F%E6%B7%B1%E5%BA%A6%E8%BF%9E%E7%BB%93%E5%AE%9E%E4%BD%9C-swift-%E5%AE%8C%E6%95%B4%E6%B5%81%E7%A8%8B%E4%B8%8E%E6%8A%80%E5%B7%A7%E8%A7%A3%E6%9E%90-b08ef940c196/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1573482897" data-df="YYYY 年 M 月 D 日" > 2019 年 11 月 11 日 </time><h4 class="pt-0 my-2">iOS Deferred Deep Link 延迟深度连结实作｜Swift 完整流程与技巧解析</h4><div class="text-muted"><p>针对iOS App推广，解决未安装用户跳转后资料遗失问题，透过剪贴簿与Cookie共享技术，实现安装后自动还原目标页面，提升用户体验与转换率。本文详解Swift实作步骤与iOS版本支援策略。</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-robotic-process-automation/github-action-%E5%85%8D%E8%B4%B9%E9%83%A8%E7%BD%B2-zreviewtender-app-%E5%95%86%E5%9F%8E%E8%AF%84%E4%BB%B7%E7%9B%91%E6%8E%A7%E6%9C%BA%E5%99%A8%E4%BA%BA-%E4%B8%89%E6%AD%A5%E9%AA%A4%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B-0095528cf875/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1727354541" data-df="YYYY 年 M 月 D 日" > 2024 年 09 月 26 日 </time><h4 class="pt-0 my-2">Quick Start! Github Action x ZReviewTender 免费快速部署你的 App 商城评价监控机器人</h4><div class="text-muted"><p>简单三步骤为您建立免费稳定安全的 App 评价机器人，即时关注使用者的最新评价。</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-robotic-process-automation/ios-%E6%8D%B7%E5%BE%84%E8%87%AA%E5%8A%A8%E5%8C%96-3-%E6%8B%9B%E8%87%AA%E5%8A%A8%E8%BD%AC%E5%8F%91%E7%AE%80%E8%AE%AF%E4%B8%8E%E5%BB%BA%E7%AB%8B%E6%8F%90%E9%86%92%E5%BE%85%E5%8A%9E%E4%BA%8B%E9%A1%B9%E6%95%99%E5%AD%A6-309d0302877b/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1724083008" data-df="YYYY 年 M 月 D 日" > 2024 年 08 月 19 日 </time><h4 class="pt-0 my-2">iOS 捷径自动化应用场景 — 自动转发简讯与自动建立提醒待办事项</h4><div class="text-muted"><p>iOS 使用 捷径 Shortcut 简单几个步骤自动转发特定简讯给家长和自动创建包裹到货领取与信用卡缴费提醒代办事项</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/zrealm-dev/ios-%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%B8%90%E5%8F%B7%E5%AF%86%E7%A0%81%E6%95%B4%E5%90%88-%E6%8F%90%E5%8D%87-app-%E4%B8%8E%E7%BD%91%E7%AB%99%E7%99%BB%E5%85%A5%E4%BD%93%E9%AA%8C-%E5%BF%AB%E9%80%9F%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%A5%E5%AF%86%E7%A0%81-948ed34efa09/" class="btn btn-outline-primary" aria-label="上一篇" ><p>iOS 跨平台帐号密码整合｜提升 APP 与网站登入体验，快速自动填入密码</p></a> <a href="/posts/zrealm-dev/laravel-homestead-%E5%BF%AB%E9%80%9F%E5%BB%BA%E7%BD%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E4%B8%8E-phpmyadmin-%E7%AE%A1%E7%90%86-mysql-%E8%B5%84%E6%96%99%E5%BA%93-87090f101b9a/" class="btn btn-outline-primary" aria-label="下一篇" ><p>重灌笔记1-Laravel Homestead + phpMyAdmin 环境建置</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2026</time> <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="除非另有注明，本网站上的所有文章皆由作者依据 创用 CC 姓名标示 4.0 国际授权条款（CC BY 4.0）授权使用。" >版权所有。</span> <br/> 浏览次数: <u>783,237+</u>, 最后更新时间: <u>2026-01-03 10:22:15 +08:00</u></p><p>本站使用 <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> 主题建置于 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>。<br/> Medium 文章由 <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown</a> 转换而成。</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">热门标签</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/simplified-chinese/">simplified-chinese</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E9%96%8B%E7%AE%B1/">開箱</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a> <a class="post-tag btn btn-outline-primary" href="/tags/japan/">japan</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">发现有新的内容版本。</p><button type="button" class="btn btn-primary" aria-label="Update"> 更新 </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'zh-CN';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli-zh-hans.github.io', 'data-repo-id': 'R_kgDOQwFqjA', 'data-category': 'General', 'data-category-id': 'DIC_kwDOQwFqjM4C0UN-', 'data-mapping': 'url', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">找不到符合的结果。</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
